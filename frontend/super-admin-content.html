//super-admin-content.html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Content Management - Super Admin</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/components.css">
    <style>
        .content-tabs {
            display: flex;
            gap: 10px;
            border-bottom: 2px solid #e2e8f0;
            margin-bottom: 20px;
        }

        .content-tab {
            padding: 12px 20px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .content-tab.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        textarea {
            min-height: 400px;
            font-family: 'Inter', sans-serif;
        }

        .preview-box {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            min-height: 200px;
        }
    </style>
</head>

<body>
    <header class="appbar">
        <h2>AptioGen - Content Management</h2>
        <div class="right-icons">
            <i class="fa-solid fa-moon theme-toggle" title="Toggle Theme"></i>
            <a href="super-admin-dashboard.html"><i class="fa-solid fa-arrow-left" title="Back"></i></a>
        </div>
    </header>

    <div class="container">
        <h1>Content Management</h1>
        <p>Manage Terms & Conditions, Privacy Policy, and FAQs</p>

        <div class="card">
            <div class="content-tabs">
                <button class="content-tab active" data-tab="studentTerms">Student T&C</button>
                <button class="content-tab" data-tab="instituteTerms">Institute T&C</button>
                <button class="content-tab" data-tab="privacy">Privacy Policy</button>
                <button class="content-tab" data-tab="faqs">FAQs</button>
            </div>

            <!-- Student Terms & Conditions -->
            <div id="studentTerms" class="tab-content active">
                <div class="flex justify-between items-center mb-3">
                    <h3>Student Terms & Conditions</h3>
                    <span class="badge badge-info">Key: studentTerms</span>
                </div>
                <textarea id="studentTermsContent" placeholder="Enter student terms and conditions..."></textarea>
                <button class="btn btn-primary mt-3 btn-save" data-type="studentTerms">Save Student Terms</button>
            </div>

            <!-- Institute Terms & Conditions -->
            <div id="instituteTerms" class="tab-content">
                <div class="flex justify-between items-center mb-3">
                    <h3>Institute Terms & Conditions</h3>
                    <span class="badge badge-info">Key: instituteTerms</span>
                </div>
                <textarea id="instituteTermsContent" placeholder="Enter institute terms and conditions..."></textarea>
                <button class="btn btn-primary mt-3 btn-save" data-type="instituteTerms">Save Institute Terms</button>
            </div>

            <!-- Privacy Policy -->
            <div id="privacy" class="tab-content">
                <h3>Privacy Policy</h3>
                <textarea id="privacyContent" placeholder="Enter privacy policy...">
# Privacy Policy

Last updated: February 15, 2026

## Information We Collect
- Account information (name, email, institution)
- Performance data (quiz scores, progress)
- Usage analytics

## How We Use Information
- Provide educational services
- Track student progress
- Improve platform features
- Generate analytics for institutions

## Data Sharing
We do not sell personal data. Information is shared only with:
- Your institution (for enrolled students)
- Service providers (hosting, analytics)

## Data Security
We implement industry-standard security measures to protect your data.

## Your Rights
- Access your data
- Request data deletion
- Opt-out of analytics

## Contact
privacy@aptiogen.com
                </textarea>
                <button class="btn btn-primary mt-3 btn-save" data-type="privacy">Save Privacy Policy</button>
            </div>

            <!-- FAQs -->
            <div id="faqs" class="tab-content">
                <h3>Frequently Asked Questions</h3>
                <textarea id="faqsContent" placeholder="Enter FAQs...">
# Frequently Asked Questions

## For Students

**Q: How do I join my institution?**
A: Use the credentials provided by your institution admin during registration.

**Q: Can I practice without joining an institution?**
A: Yes! Select "Independent Student" during login to access public practice quizzes.

**Q: How is my rank calculated?**
A: Rankings are based on your average score across all completed events.

## For Institutions

**Q: How do I add students?**
A: Use the batch management system to create batches and add students via CSV import or manual entry.

**Q: Can I create custom questions?**
A: Currently, questions are managed by the platform admin. You can select from the question bank when creating events.

**Q: What subscription plans are available?**
A: Free, Basic, Premium, and Enterprise plans with varying student limits and features.

## Technical

**Q: Which browsers are supported?**
A: Chrome, Firefox, Safari, and Edge (latest versions).

**Q: Is there a mobile app?**
A: Currently web-only, but the platform is mobile-responsive.

**Q: How do I report a bug?**
A: Contact support@aptiogen.com with details.
                </textarea>
                <button class="btn btn-primary mt-3 btn-save" data-type="faqs">Save FAQs</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initTheme } from './js/theme.js';
        import { auth, settingsAPI } from './js/superAdminAPI.js';

        initTheme();

        if (!auth.isLoggedIn()) {
            window.location.href = 'super-admin-login.html';
        }

        // Tab Switching Logic
        const switchTab = (tabId) => {
            const tabs = document.querySelectorAll('.content-tab');
            const contents = document.querySelectorAll('.tab-content');

            tabs.forEach(t => t.classList.remove('active'));
            contents.forEach(c => c.classList.remove('active'));

            const activeBtn = document.querySelector(`.content-tab[data-tab="${tabId}"]`);
            if (activeBtn) activeBtn.classList.add('active');

            const activeContent = document.getElementById(tabId);
            if (activeContent) activeContent.classList.add('active');
        };

        // Attach Tab Click Listeners
        document.querySelectorAll('.content-tab').forEach(btn => {
            btn.addEventListener('click', () => {
                const tabId = btn.getAttribute('data-tab');
                switchTab(tabId);
            });
        });

        // Save Content Logic
        const saveContent = async (type) => {
            const content = document.getElementById(`${type}Content`).value;

            try {
                const result = await settingsAPI.updateSetting(type, content);
                if (result.message) {
                    alert(`${type} saved successfully!`);
                }
            } catch (error) {
                alert('Failed to save: ' + error.message);
            }
        };

        // Attach Save Button Listeners
        document.querySelectorAll('.btn-save').forEach(btn => {
            btn.addEventListener('click', () => {
                const type = btn.getAttribute('data-type');
                saveContent(type);
            });
        });

        // Load saved content
        async function loadAllContent() {
            const types = ['studentTerms', 'instituteTerms', 'privacy', 'faqs'];

            try {
                const settings = await settingsAPI.getSettings();
                console.log('Loading settings:', settings);

                types.forEach(type => {
                    const setting = settings.find(s => s.key === type);
                    if (setting && document.getElementById(`${type}Content`)) {
                        document.getElementById(`${type}Content`).value = setting.value;
                    }
                });
            } catch (error) {
                console.error('Error loading content:', error);
            }
        }

        loadAllContent();
    </script>
</body>

</html>